within NewBloodyMary_testing.Parts;
class MassContent "Compartment for mass content storage"
  extends ConditionalVolume;
//  Physiolibrary.Types.RealIO.MassConcentrationOutput massConcentration
  Modelica.Blocks.Interfaces.RealOutput massConcentration(unit = "g/l") annotation (Placement(transformation(
          extent={{-44,-88},{-24,-68}}), iconTransformation(
        extent={{-10,-10},{10,10}},
        rotation=270,
        origin={-48,-96})));
  Physiolibrary.Types.RealIO.MassOutput mass annotation (Placement(
        transformation(extent={{58,-92},{78,-72}}), iconTransformation(
        extent={{-10,-10},{10,10}},
        rotation=270,
        origin={70,-96})));

  parameter Physiolibrary.Types.RealIO.MassConcentrationInput initConcentration;
  FFSA.Parts.MassInflowConnector massInflowConnector annotation (Placement(
        transformation(extent={{-10,-40},{10,-20}}), iconTransformation(extent={
            {-10,-40},{10,-20}})));

initial equation
  mass=initConcentration*volume;

equation
    massInflowConnector.q= der(mass);
    massConcentration=mass/volume;
    massInflowConnector.conc=massConcentration;

    annotation (Placement(transformation(extent={{-44,-96},{-24,-76}}),
        iconTransformation(
        extent={{-10,-10},{10,10}},
        rotation=270,
        origin={-54,-96})),
                 Icon(coordinateSystem(
          preserveAspectRatio=false,extent={{-100,-100},{100,100}}),
        graphics={
        Text(
          extent={{-34,14},{52,84}},
          lineColor={28,108,200},
          textString="Mol"),
        Polygon(
          points={{-84,20},{-84,56},{-86,62},{-90,70},{-94,74},{-98,78},{-94,82},
              {-82,90},{86,90},{94,86},{98,82},{98,78},{96,74},{94,72},{94,66},{
              94,20},{94,-78},{92,-84},{88,-86},{78,-86},{-74,-86},{-82,-86},{-84,
              -82},{-84,-76},{-84,20}},
          lineColor={0,0,0},
          fillColor={255,255,255},
          fillPattern=FillPattern.Solid,
          smooth=Smooth.Bezier),
        Polygon(
          points={{-84,20},{94,20},{94,20},{94,-78},{92,-84},{88,-86},{78,-86},{
              -74,-86},{-82,-86},{-84,-82},{-84,-76},{-84,20},{-84,20}},
          lineColor={0,0,0},
          fillColor={215,215,215},
          fillPattern=FillPattern.Solid,
          smooth=Smooth.Bezier),
        Ellipse(
          extent={{-62,12},{-56,6}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-40,16},{-34,10}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-30,4},{-24,-2}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-22,14},{-16,8}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-64,-10},{-58,-16}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-48,-14},{-42,-20}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-52,-38},{-46,-44}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-74,-54},{-68,-60}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-74,-28},{-68,-34}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-78,10},{-72,4}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-14,-12},{-8,-18}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{68,8},{74,2}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{2,-52},{8,-58}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-24,-26},{-18,-32}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-34,-44},{-28,-50}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-34,-70},{-28,-76}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-2,12},{4,6}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{18,-2},{24,-8}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{0,0},{6,-6}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-30,-12},{-24,-18}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{64,-36},{70,-42}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{48,-36},{54,-42}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{44,-48},{50,-54}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{28,-20},{34,-26}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{18,-38},{24,-44}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{18,-64},{24,-70}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{66,-6},{72,-12}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{82,16},{88,10}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{52,6},{58,0}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{38,12},{44,6}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-76,-74},{-70,-80}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-18,-60},{-12,-66}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{-56,-72},{-50,-78}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{18,12},{24,6}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{2,-76},{8,-82}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{80,-78},{86,-84}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{64,-68},{70,-74}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{74,-58},{80,-64}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{76,-36},{82,-42}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{54,-18},{60,-24}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{42,-72},{48,-78}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{80,-14},{86,-20}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Ellipse(
          extent={{40,-6},{46,-12}},
          lineColor={0,0,0},
          fillColor={127,0,0},
          fillPattern=FillPattern.Solid),
        Text(
          extent={{30,124},{300,90}},
          lineColor={28,108,200},
          textString="%name",
          horizontalAlignment=TextAlignment.Left)}),
                                            Diagram(coordinateSystem(
          preserveAspectRatio=false, extent={{-100,-100},{100,100}})));
end MassContent;
